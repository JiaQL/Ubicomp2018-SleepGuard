\section{DISCUSSION}\label{sec:discussion}

In this paper, we have shown that sensors available on off-the-shelf smartwatches can be used to capture rich information about sleep quality and factors affecting it. The main focus of our work has been to develop the required algorithms for capturing rich sleep related information as accurately as possible. While the recognition performance of our system is very encouraging, there are some issues that would need to be addressed in our system before larger-scale deployment would be feasible. Below we highlight the main issues and briefly discuss possible ways to overcome them.


%In this work, we try to examine the possibilities of using smart wearables to detect sleep. Our focus is to provide a series of ways to detect sleep-related events that will greatly assist in the assessment of sleep quality.While our results are satisfactory, there are still a handful of issues to address as we highlight below.

\begin{itemize}
  \item \textbf{The accuracy of sleep stage detection.}
  Compared with polysomnography-based sleep stage detection, the accuracy of {\systemname} is lower and it is rather difficult to achieve comparable performance. This is because polysomnography monitors and analyzes sleep based on information that directly correlates with sleep such as EEG, EMG, EOG, and oxygen saturation, whereas {\systemname} estimates sleep quality from cues that have an indirect effect on sleep quality. In particular, \systemname only combines the body movement, acoustic events, sleep environment and other events during sleep to predict the sleep stage. Therefore, {\systemname} is not a replacement for professional medical equipment for high-precision sleep detection, but serves as a personal technology that provides easy-to-use and non-intrusive way to monitor personal sleep patterns and to obtain feedback about the sleep quality. Moreover, it can trace back to the real causes affecting sleep quality, and guide users to have the direction to improve sleep quality.% However, SleepGuard is able to take advantage of the popularity of business smartwatches to provide easy-to-use and less intrusive sleep detection services, making it easy for users to learn about their sleep and make adjustments based on suggestions.
  \item \textbf{Battery life.}
  A critical design requirement for sleep detection is that the monitoring can operate sufficiently long to cover the entire duration of the user's sleep. Battery capacity on smartwatches is rather limited, resource consumption needs to be optimized by considering both the data collection and analysis phases. In our experiments we demonstrated that additional devices in the vicinity of the smartwatch can be taken advantage of, for example, some of the sensing and processing tasks can be offloaded to smartphones or other smart devices located within sufficient proximity. Particularly the acoustic event detection could be offloaded to smartphones that are located on the bedside table or elsewhere in the user's vicinity as smartphones increasingly integrate co-processors for audio processing that allow performing the audio event detection with a small energy footprint. We have also designed our analysis techniques to be as lightweight as possible to minimize energy consumption. Further improvements can be achieved by designing dynamic duty cycling strategies that reduce sampling during periods of regularity, and by using simple triggering mechanisms, such as a motion intensity detector to reduce processing overhead. Exploring these techniques is part of our future work.%For our work, we only use smartwatch as devices for data collection and delivery, while other computing capabilities are mainly implemented on smartphone, and we also have adopted simpler algorithms to reduce resource usage. But despite this, our smartwatch can only continue to collect about 6 hours of sensor data, which is not sufficient for longer sleep detection, so we still need to further study how to reduce power consumption. One possible solution is to change the data collection strategy to dynamically adjust the sampling frequency based on whether the body is moving or not.
  \item \textbf{Sensor data.}
  One limitation of {\systemname} is that we have not taken advantage of heart rate when determining the current sleep stage of the user. The main reason for this is programming limitations of the Huawai Smartwatch 2 device used in the experiments. Specifically, the device does not support querying heart rate information, but only provides it through a dedicated application. The output of this application is unfortunately not sufficiently accurate for sleep monitoring purposes, and restricts the rate at which information can be acquired. To compensate for the lack of heart rate data, \systemname considers the respiratory amplitude detected from accelerometer instead. As shown in our experiments, the respiratory amplitude detection significantly improves the performance of the sleep stage detection. % which can help us improve the performance of the sleep stage detection (it has been proved in our experiment).
  \item \textbf{Limitations of the algorithm.}
  When we try to detect sleep posture, we find a corresponding relationship between the position of the arm and the sleeping posture, so we indicate the sleeping posture by detecting its position. But currently we consider some specific positions of the arm in the four sleeping positions, some unusual arm's positions are ignored by us and that is something we need to improve further in future work.
  
  \item \textbf{Single wrist sensor.}
  In our paper, we only use the sensor data in the left-hand smart watch, though movement patterns of the left and right wrist are different during sleep, the technique used for detecting sleep related behaviors is the same. Some sleep related events like sleep posture, body rollover, acoustic events, illumination conditions, both of them are not affected by different wrists, the reason is that these events are related to the entire body rather than the part of the body. The only thing we need to do is adjusting new experimental parameters when the smartwatch is worn on different wrists. But for the hand position detection and body micro movement detection including the arm raising and hand movement does have an impact, it is because the hand movement probability and frequency are different on different hands. And the degree of impact on our detection performance varies from person to person and can be largely cancelled through calibration. This is where we need to measure and consider in our future work.
  
  In addition, when we use Fitbit as groundtruth, Fitbit is worn on a different wrist from {\systemname}. However, from the analysis of the basic principles of sleep stage detected by {\systemname} and Fitbit, it can be found that this does not have much effect on our assessment of the results. Both Fitbit and {\systemname} have common grounds for detecting sleep stages based on acoustic events, the occurrence and frequency of physical activity, but we go further to conduct more fine-grained detection and classification of these events, and add more consideration about illumination conditions and respiratory amplitude. One thing we can know is that the measurement of events such as acoustic events, body rollover events, body tremble, etc., has little to do with the sensor data collected from the left or right hand. The major difference that may exist is these rich events added in {\systemname}, such as hand position, sleep posture, etc,  but these are not detected by Fitbit, so they have no effect when compared. Moreover, we also did a test experiment. The smart watches were worn on the left and right hands respectively and the event detection algorithm in {\systemname} was mainly used to detect those events that are of concern in Fitbit. We can 19see that the results are not much different. Therefore, in the end, in order to ensure that the user¡¯s sleep is as uncomfortable as possible, we choose to make Fitbit and Smartwatch are worn on different hands. 


  \item \textbf{Multiple sleepers}
  Currently, {\systemname} considers that the user is sleeping alone, but there are still more complicated situations in reality, such as sleeping with a bed partner, baby, and/or a pet. However, because {\systemname} is based on the detection of smartwatch, Unlike smartphone placed on the bed, it can show more sensitivity to the user's own activities. Therefore, for the detection performance of sleeping posture, body rollover and hand position events has almost no effect, but it may have some influence on the body micro movements and acoustic events. When people around us have relatively large movements, such as body rollover, they may fluctuate to users, making it possible for us to mistakenly detect it as user's micro movements. For this kind of situation, we can test the change of acceleration data in multi-sleeper situations by popularizing the experiment to adjust the detection threshold of our body's micro movements and achieve better detection performance. This will also be a direction for our future work. As for acoustic events, we can further limit conditions, such as training the different magnitudes of the energy of the sound signals collected by the user's hand at different positions to identify whether it is the user's own acoustic event or the sound of the bed partner. In addition, the related acoustic events of the bed partner can also be considered as a factor affecting the user's sleep.

  \item \textbf{Occurrence probability of unusual arm's positions.}
  We detect sleep posture based on arm's positions and focus on three specific positions when detecting the position of the hand. In sleep position detection, we are based on the assumption that between the user's arms position and sleeping postures that the arms have common and (reasonably) stable positions in each posture and we consider as many possible arm positions as possible in four sleeping postures, which are the most common arm's positions for users during sleep. In hand position detection, we chose the three most representative locations that do have an impact on sleep and health. But we know that not all users or a user will not have these common positions all the time. These unusual arm's positions may cause the performance of our sleep posture detection algorithm to degrade. But of the 15 participants we tested, we can see from the video that the unusual arm's positions are present, but these are basically a slight evolution of the common positions, which have little effect on the detection of the sleeping posture. Only a small part of the unusual position will cause us to produce false positives. For this issue, we will expand the test population to further measure the impact of unusual arm's position on our system and consider more hand positions in future work.

 \item \textbf{Actionable feedback.} The current version of {\systemname} has been designed to provide simple recommendations on how users should improve their sleeping environment and habits. These can be linked with additional suggestions that may alleviate the causes. For example, problems in falling asleep can be mitigated by doing some exercise before going to bed or by going to sleep with soft music that can be automatically turned off. Similarly, we can identify poor postures and hand positions and give feedback on what the users should aim to improve to reduce sleep problems. For example, \cite{posture} present an anti-supine device mimicking the so-called "tennis ball technique" to control sleep posture, in order to improve OSA hypopnoea syndrome.  For some problems, such as persistent snoring or coughing, our system can provide suggestions such as how to improve posture to mitigate these problems, or potentially detect severe cases where medical intervention would be appropriate. Indeed, for long term snoring the medical guidelines suggest undergoing a physical examination so that they can timely discover possible physical diseases that may cause snoring, such as high blood pressure, cardiovascular and cerebrovascular diseases. 

\end{itemize}
